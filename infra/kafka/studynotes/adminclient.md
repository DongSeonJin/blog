---
description: 카프카 어드민 클라이언트
---

# AdminClient

카프카의 AdminClient는 카프카 클러스터를 코드(애플리케이션)를 통해 관리하고 모니터링할 수 있도록 도와주는 API다. Kafka 0.11.0.0 버전부터 도입되었으며, 이전에는 셸 스크립트(`kafka-topics.sh` 등)로 수행하던 관리 작업을 프로그래밍 방식으로 처리할 수 있게 해준다.

토픽 목록 조회, 생성, 삭제, 클러스터 상세 정보 확인, ACL 관리, 설정을 확인하거나 변경하는 등의 관리 작업을 자동화하거나 자체 관리 도구를 만드는 데 사용된다.





### :bulb:AdminClient 의 비동기적 처리와 최종적 일관성

> Kafka의 AdminClient는 대부분의 작업을 비동기(Asynchronous) 방식으로 처리한다. 즉, 토픽을 만들거나 삭제하라는 명령을 내렸을 때, 그 작업이 끝날 때까지 기다리지 않고 즉시 다음 코드를 실행한다.
>
> AdminClient의 메서드들(예: `createTopics()`, `deleteTopics()`)은 호출하면 즉시 `XxxResult` 객체(예: `CreateTopicsResult`)를 반환한다. 그리고 이 객체 안에는 `KafkaFuture` 라는 특별한 객체가 들어있다.
>
> 이 `KafkaFuture`를 통해 비동기 작업의 결과를 확인하거나, 각각의 토픽 상태를 하나씩 확인하거나, 작업이 완료되었을 때 특정 동작을 하도록 만들 수 있다.
>
>
>
> &#x20;AdminClient의 비동기 요청을 받아서 클러스터 전체에 일관성을 맞추는 작업은 카프카 내부의 컨트롤러 브로커가 알아서 처리한다. 이 시간 동안 어떤 브로커는 새 토픽을 알고, 어떤 브로커는 아직 모르는 '일시적 불일치 상태'가 존재할 수 있다.
>
> 하지만 결국에는 모든 브로커가 컨트롤러로부터 변경 사항을 전달받아 동일한 메타데이터 상태를 갖게 된다. 이것을 최종적 일관성이라고 한다.





## 옵션

AdminClient의 각 메서드는 메서드별로 특정한 Options 객체를 인수로 받는다.

AdminClient의 `Options` 객체는 API 메서드를 호출할 때, 기본적인 파라미터 외에 세부적인 동작 방식을 제어하기 위해 사용하는 설정 객체다. 예를들어, `createTopics()` 메서드는 `CreateTopicsOptions` 객체를, `deleteTopics()`는 `DeleteTopicsOptions` 객체를 추가 파라미터로 받는다.

* 타임아웃 설정 (`timeoutMs`): 클라이언트가 브로커로부터 응답을 받을 때까지 기다릴 최대 시간을 밀리초(ms) 단위로 지정한다. 이 시간을 초과하면 타임아웃 예외가 발생한다.
* Dry Run (`validateOnly`): 가장 유용한 기능 중 하나다. `true`로 설정하면, 실제 명령을 실행하지 않고 요청이 성공할 수 있는지 유효성 검사만 수행한다. 예를 들어, 중요한 토픽을 삭제하기 전에 명령이 유효한지 미리 확인하는 등의 작업에 매우 유용하다.
* 재시도 정책 설정: 특정 조건에서 요청을 재시도할지 여부 등을 설정할 수 있다.

























